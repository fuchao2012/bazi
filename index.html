<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>三官八字排盘</title>
    <link rel="stylesheet" href="https://cdn.bootcss.com/weui/1.1.3/style/weui.min.css">
    <link rel="stylesheet" href="https://cdn.bootcss.com/jquery-weui/1.2.1/css/jquery-weui.min.css">
    <style>
        .title {
            text-align: center;
            font-size: 34px;
            color: #3cc51f;
            font-weight: 400;
        }
    </style>
</head>

<body>
    <div class="weui-cells weui-cells_form">
        <div class="weui-cell" style="justify-content: center;">
            <h1 class="title">三官八字排盘</h1>
        </div>
        <div class="weui-cell">
            <div class="weui-cell__hd"><label class="weui-label">姓名</label></div>
            <div class="weui-cell__bd">
                <input class="weui-input" required type="text" placeholder="请输入姓名">
            </div>
        </div>
        <div class="weui-cell weui-cells_switch">
            <div class="weui-cell__hd"><label class="weui-label">性别</label></div>
            <div class="weui-cell__bd">
                <input class="weui-input" type="text" id="gender-picker">
            </div>
        </div>
        <div class="weui-cell">
            <div class="weui-cell__hd"><label for="" class="weui-label">出生日期</label></div>
            <div class="weui-cell__bd">
                <input class="weui-input" required type="text" id="datetime-picker">
            </div>
        </div>
        <div class="weui-cell">
            <div class="weui-cell__hd"><label for="" class="weui-label">祖籍</label></div>
            <div class="weui-cell__bd">
                <input class="weui-input" required type="text" value="" id="city-picker">
            </div>
        </div>
        <div class="weui-cell">
            <a href="javascript:;" class="weui-btn weui-btn_primary" onclick="runBazi()">开始测算</a>
        </div>
        <div class="weui-cell" style="margin-top: 3rem;">
            <img src="http://mailshark.nos-jd.163yun.com/document/static/4CB791511ADB3DE8A44A288818769666.jpg" alt="" width="100%">
        </div>
    </div>
    <script src="https://cdn.bootcss.com/jquery/1.11.0/jquery.min.js"></script>
    <script src="https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js"></script>
    <script src="https://cdn.bootcss.com/jquery-weui/1.2.1/js/jquery-weui.min.js"></script>
    <script src="https://cdn.bootcss.com/jquery-weui/1.2.1/js/city-picker.min.js"></script>

    <script>
        $("#city-picker").cityPicker({ title: "请选择祖籍所在地" })
        $("#datetime-picker").datetimePicker({ title: '请选择出生日期（农历）' });
        $("#gender-picker").select({ title: "选择性别", items: ["男", "女"] });
        function runBazi() {
            const datetime = $('#datetime-picker').val();
            if(!datetime) {
                $.toptip('请提供完整准确的八字信息', 'error');
                return;
            }
            const dateStr = datetime.split(' ')[0] + '-' + datetime.split(' ')[1].split(':')[0];
            const gender = $('gender-picker').val() === '男' ? '0' : '1';
            localStorage.setItem('t', dateStr);
            localStorage.setItem('g', gender);
            $.toast("正在测算,请稍后");
            setTimeout(function () {
                window.location.href = './result.html';
            }, 2000)
        }
    </script>
</body>

</html>